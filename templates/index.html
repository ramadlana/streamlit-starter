{% extends "base.html" %}

{% block title %}Dashboard - Streamlit Starter{% endblock %}

{% block content %}
<style>
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }

    /* Container matches Navbar height (60px) */
    .container {
        display: block !important;
        width: 100vw !important;
        height: calc(100vh - 60px) !important;
        max-width: 100vw !important;
        margin: 60px 0 0 0 !important;
        padding: 0 !important;
        position: relative !important;
        overflow: hidden !important;
    }

    /* Pull the iframe UP by 5px to mask the Streamlit decoration bar and close the gap */
    .app-viewport {
        width: 100% !important;
        height: calc(100% + 5px) !important;
        margin-top: -5px !important;
        border: none !important;
        display: block !important;
        background: #0c111d !important;
    }

    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #0c111d;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.4s ease-out;
    }

    .spinner {
        width: 48px;
        height: 48px;
        border: 4px solid rgba(0, 120, 212, 0.1);
        border-radius: 50%;
        border-top-color: #0078d4;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
</style>

<div id="loader" class="loading-overlay">
    <div class="spinner"></div>
    <p style="color: #94a3b8; font-family: 'Outfit', sans-serif;">Initializing Dashboard...</p>
</div>

<iframe src="{{ streamlit_url }}" class="app-viewport"
    onload="document.getElementById('loader').style.opacity='0'; setTimeout(()=>document.getElementById('loader').style.display='none', 400)">
</iframe>

{% endblock %}